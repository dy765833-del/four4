{% extends "base.html" %}
{% block title %}Profile{% endblock %}

{% block content %}
<div style="padding: 120px 4%; max-width: 1100px; margin: 0 auto;">
     <p>Logged in as: <strong>{{ user.username }}</strong></p> <br>

  <h1 style="margin-bottom: 25px;">My Profile</h1>

  <div style="display: grid; grid-template-columns: 320px 1fr; gap: 30px;">
    
    <!-- LEFT: Preview -->
    <div style="background:#1a1a1a; border:1px solid #2a2a2a; border-radius:12px; padding:20px;">
      <div style="margin-bottom:15px;">
        {% if user.profile_picture %}
          <img src="{{ user.profile_picture.url }}"
               alt="Profile"
               style="width:100%; height:320px; object-fit:cover; border-radius:10px;">
        {% else %}
          <div style="width:100%; height:320px; border-radius:10px; background:#2a2a2a; display:flex; align-items:center; justify-content:center; color:#808080;">
            No Profile Picture
          </div>
        {% endif %}
      </div>

      <h2 style="margin: 0;">{{ user.username }}</h2>
      <p style="color:#808080; margin-top: 6px;">{{ user.email }}</p>

      <p style="margin-top: 15px; color:#e5e5e5;">
        {{ user.bio|default:"No bio yet. Add one on the right!" }}
      </p>
    </div>

    <!-- RIGHT: Edit -->
    <div class="form-container" style="margin:0;">
      <h2 style="margin-bottom: 15px;">Edit Profile</h2>

      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        {% if form.errors %}
          <div class="alert alert-error">
            {{ form.errors }}
          </div>
        {% endif %}

        <div class="form-group">
          {{ form.bio.label_tag }}
          {{ form.bio }}
        </div>

        <div class="form-group">
          {{ form.profile_picture.label_tag }}
          {{ form.profile_picture }}
        </div>

        <button type="submit" class="btn btn-primary">Save Changes</button>
      </form>
    </div>

  </div>
</div>

<style>
@media (max-width: 900px){
  div[style*="grid-template-columns: 320px 1fr"]{
    grid-template-columns: 1fr !important;
  }
}
</style>
{% endblock %}
